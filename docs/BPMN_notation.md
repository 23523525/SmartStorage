## 2.5. Модель в нотации BPMN (с комментариями)

Рассмотрим основной бизнес-процесс «Регистрация прихода товара».

Участники (Pools/Lanes):

- Лейн «Оператор склада».  
- Лейн «Система SmartStorage».

Последовательность:

1. Старт-событие: «Поступление партии товара».  
2. Задача оператора: «Сканировать QR-код товара» или «Выбрать товар из списка».  
3. Задача оператора: «Ввести количество и комментарий» (форма добавления прихода).  
4. Задача системы: «Проверить существование товара» (обращение к таблице `item`).  
   - Исключающее ответвление (Gateway):  
     - Если товар не найден — Задача системы: «Вернуть ошибку NotFound» → Сообщение оператору → Завершение процесса (ошибка).  
     - Если товар найден — переход к следующему шагу.  
5. Задача системы: «Создать запись движения (тип IN)» в таблице movement и обновить count товара.  
6. Задача системы: «Сформировать ответ об успешной операции и обновлённый остаток».  
7. Задача оператора: «Проверить остаток и при необходимости распечатать/сохранить информацию».  
8. Финальное событие: «Приход товара зарегистрирован».

Комментарий:  
BPMN-диаграмма показывает реальный сценарий: взаимодействие пользователя и сервера, обработку ошибок, работу с БД и результат в виде обновлённого остатка. Аналогично можно построить процессы «Регистрация расхода товара», «Создание товара», «Создание категории».